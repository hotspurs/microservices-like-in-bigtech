<mxfile host="app.diagrams.net" modified="2024-07-21T09:21:04.816Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36" etag="0By9-yJcHXezy6iLA2OF" version="24.7.2" type="device">
  <diagram name="Page-1" id="5BSupfUX_G4h9283Xh6c">
    <mxGraphModel dx="1242" dy="741" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1654" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="t_lqHuA-Cf9uETitM8Xw-1" value="Auth Service" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="430" y="80" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="t_lqHuA-Cf9uETitM8Xw-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;" edge="1" parent="1" source="t_lqHuA-Cf9uETitM8Xw-2" target="t_lqHuA-Cf9uETitM8Xw-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="t_lqHuA-Cf9uETitM8Xw-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="t_lqHuA-Cf9uETitM8Xw-2" target="t_lqHuA-Cf9uETitM8Xw-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="t_lqHuA-Cf9uETitM8Xw-2" value="User Service" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="430" y="220" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="t_lqHuA-Cf9uETitM8Xw-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;" edge="1" parent="1" source="t_lqHuA-Cf9uETitM8Xw-3" target="t_lqHuA-Cf9uETitM8Xw-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="t_lqHuA-Cf9uETitM8Xw-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;curved=0;dashed=1;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" source="t_lqHuA-Cf9uETitM8Xw-3" target="t_lqHuA-Cf9uETitM8Xw-20">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="620" y="355" as="sourcePoint" />
            <mxPoint x="830" y="120" as="targetPoint" />
            <Array as="points">
              <mxPoint x="840" y="355" />
              <mxPoint x="840" y="115" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="t_lqHuA-Cf9uETitM8Xw-3" value="Chat Service" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="430" y="310" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="t_lqHuA-Cf9uETitM8Xw-25" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;dashed=1;" edge="1" parent="1" source="t_lqHuA-Cf9uETitM8Xw-4" target="t_lqHuA-Cf9uETitM8Xw-20">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="t_lqHuA-Cf9uETitM8Xw-4" value="UserSubscription Service" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="640" y="220" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="t_lqHuA-Cf9uETitM8Xw-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" source="t_lqHuA-Cf9uETitM8Xw-5" target="t_lqHuA-Cf9uETitM8Xw-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="t_lqHuA-Cf9uETitM8Xw-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="t_lqHuA-Cf9uETitM8Xw-5" target="t_lqHuA-Cf9uETitM8Xw-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="t_lqHuA-Cf9uETitM8Xw-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" source="t_lqHuA-Cf9uETitM8Xw-5" target="t_lqHuA-Cf9uETitM8Xw-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="t_lqHuA-Cf9uETitM8Xw-5" value="Apigw" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="240" y="220" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="t_lqHuA-Cf9uETitM8Xw-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" source="t_lqHuA-Cf9uETitM8Xw-7" target="t_lqHuA-Cf9uETitM8Xw-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="t_lqHuA-Cf9uETitM8Xw-7" value="desktop" style="sketch=0;outlineConnect=0;gradientColor=none;fontColor=#545B64;strokeColor=none;fillColor=#879196;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.illustration_desktop;pointerEvents=1" vertex="1" parent="1">
          <mxGeometry x="70" y="120" width="100" height="91" as="geometry" />
        </mxCell>
        <mxCell id="t_lqHuA-Cf9uETitM8Xw-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" edge="1" parent="1" source="t_lqHuA-Cf9uETitM8Xw-8" target="t_lqHuA-Cf9uETitM8Xw-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="t_lqHuA-Cf9uETitM8Xw-8" value="" style="outlineConnect=0;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;shape=mxgraph.aws3.mobile_client;fillColor=#D2D3D3;gradientColor=none;" vertex="1" parent="1">
          <mxGeometry x="100" y="280" width="40.5" height="63" as="geometry" />
        </mxCell>
        <mxCell id="t_lqHuA-Cf9uETitM8Xw-19" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Описание&lt;/h1&gt;&lt;p style=&quot;background-color: initial; display: inline !important;&quot;&gt;&lt;strong&gt;Сервис аутентификации (Auth Service)&lt;/strong&gt;&lt;/p&gt;&lt;ul style=&quot;background-color: initial;&quot;&gt;&lt;li&gt;&lt;strong&gt;Ответственность&lt;/strong&gt;: Регистрация пользователей, авторизация, аутентификация.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Хранение данных&lt;/strong&gt;: Учетные записи пользователей, токены.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;API&lt;/strong&gt;:&lt;ul&gt;&lt;li&gt;POST /register (регистрация по почте и паролю)&lt;/li&gt;&lt;li&gt;POST /login (вход по почте и паролю)&lt;/li&gt;&lt;li&gt;POST /oauth (вход через Oauth)&lt;/li&gt;&lt;li&gt;POST /refresh-token (обновление токенов)&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;События&lt;/strong&gt;: &lt;code&gt;UserRegistered&lt;/code&gt;, &lt;code&gt;UserLoggedIn&lt;/code&gt;.&lt;/li&gt;&lt;/ul&gt;&lt;strong style=&quot;background-color: initial;&quot;&gt;Сервис профилей (User Service)&lt;/strong&gt;&lt;br&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;Ответственность&lt;/strong&gt;: Управление профилями пользователей (редактирование, поиск).&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Хранение данных&lt;/strong&gt;: Профили пользователей (никнейм, информация о себе, аватарка).&lt;/li&gt;&lt;li&gt;&lt;strong&gt;API&lt;/strong&gt;:&lt;ul&gt;&lt;li&gt;GET /user/{id}&lt;div&gt;&lt;/div&gt;(получение профиля по ID)&lt;/li&gt;&lt;li&gt;PUT /user/{id}&lt;div&gt;&lt;/div&gt;(редактирование профиля)&lt;/li&gt;&lt;li&gt;GET /users/search?nickname= (поиск по никнейму)&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;События&lt;/strong&gt;: User&lt;code&gt;ProfileUpdated&lt;/code&gt;.&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;p style=&quot;background-color: initial; display: inline !important;&quot;&gt;&lt;strong&gt;Сервис подписок (&lt;/strong&gt;&lt;span style=&quot;text-align: center;&quot;&gt;&lt;b&gt;UserSubscription Service&lt;/b&gt;&lt;/span&gt;&lt;strong&gt;)&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;Ответственность&lt;/strong&gt;: Управление подписками (добавление, удаление, подтверждение запросов).&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Хранение данных&lt;/strong&gt;: Запросы на добавление в друзья, список подписок.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;API&lt;/strong&gt;:&lt;ul&gt;&lt;li&gt;POST /subscriptions/request (отправить запрос)&lt;/li&gt;&lt;li&gt;POST /subscriptions/accept (принять запрос)&lt;/li&gt;&lt;li&gt;POST /subscriptions/decline (отклонить запрос)&lt;/li&gt;&lt;li&gt;DELETE /subscriptions/remove (удалить)&lt;/li&gt;&lt;li&gt;GET /subscriptions/{id} (список подписок)&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;События&lt;/strong&gt;: S&lt;code&gt;&lt;span style=&quot;font-family: Helvetica;&quot;&gt;ubscription&lt;/span&gt;RequestSent&lt;/code&gt;,&amp;nbsp;&lt;code&gt;&lt;span style=&quot;font-family: Helvetica;&quot;&gt;S&lt;/span&gt;&lt;code&gt;&lt;span style=&quot;font-family: Helvetica;&quot;&gt;ubscription&lt;/span&gt;&lt;/code&gt;RequestAccepted&lt;/code&gt;, &lt;code&gt;&lt;span style=&quot;font-family: Helvetica;&quot;&gt;S&lt;/span&gt;&lt;code&gt;&lt;span style=&quot;font-family: Helvetica;&quot;&gt;ubscription&lt;/span&gt;&lt;/code&gt;RequestDeclined&lt;/code&gt;,&amp;nbsp;&lt;code&gt;&lt;span style=&quot;font-family: Helvetica;&quot;&gt;S&lt;/span&gt;&lt;code&gt;&lt;span style=&quot;font-family: Helvetica;&quot;&gt;ubscription&lt;/span&gt;&lt;/code&gt;Removed&lt;/code&gt;.&lt;/li&gt;&lt;/ul&gt;&lt;strong style=&quot;background-color: initial;&quot;&gt;Сервис чатов (Chat Service)&lt;/strong&gt;&lt;br&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;Ответственность&lt;/strong&gt;: Управление сообщениями между пользователями.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Хранение данных&lt;/strong&gt;: Сообщения, чаты.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;API&lt;/strong&gt;:&lt;ul&gt;&lt;li&gt;POST /chat/create (Создание чата)&lt;/li&gt;&lt;li&gt;POST /messages/send (отправка сообщения)&lt;/li&gt;&lt;li&gt;GET /messages/chat/&lt;div&gt;&lt;/div&gt;(получение сообщений из чата с пользователем)&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;События&lt;/strong&gt;:&amp;nbsp;&lt;code&gt;ChatCreated,MessageSent&lt;/code&gt;, &lt;code&gt;MessageReceived&lt;/code&gt;.&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;div&gt;&lt;p&gt;&lt;strong&gt;Сервис уведомлений (Notification Service)&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;Ответственность&lt;/strong&gt;: Управление уведомлениями (включая пуш-уведомления для мобильных устройств).&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Хранение данных&lt;/strong&gt;: Уведомления.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;API&lt;/strong&gt;:&lt;ul&gt;&lt;li&gt;POST /notifications/send (отправка уведомления)&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;События&lt;/strong&gt;: &lt;code&gt;NotificationSent&lt;/code&gt;.&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;Для хранения данных во всех сервисах будет использоваться PostgreSQL.&lt;/div&gt;&lt;div&gt;&lt;b&gt;Обоснование:&lt;/b&gt; Надежность, поддержка ACID транзакций.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Для асинхронного общения между сервисами будет использоваться Kafka.&lt;/div&gt;&lt;div&gt;&lt;b&gt;Обоснование:&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;Высокая пропускная способность, масштабируемость, отказаустойчивость.&lt;/span&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="40" y="390" width="430" height="1390" as="geometry" />
        </mxCell>
        <mxCell id="t_lqHuA-Cf9uETitM8Xw-20" value="Notification Service" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="640" y="100" width="120" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
